<!doctype html>
<html lang="en">
<body>
<app-header [pageTitle]="pageTitle"></app-header>
<main>
  <section class="section">
    <div class="container">

      <div class="row gap-y">
        <div class="col-lg-8 b-l order-lg-2">
          <div class="row gap-y">
            <h1>offers:</h1>

            <!-- Get stages -->
            <div class="col-md-6" *ngFor="let stage of stages">
              <div class="card card-blog shadow-box shadow-hover border-0">
                <a><img class="card-img-top img-responsive" src="https://picsum.photos/350/200/?random&gravity=north" alt=""></a>
                <div class="card-body">
                  <div class="d-flex align-items-center justify-content-between">
                    <div class="author d-flex align-items-center">
                      <img class="author-picture rounded-circle icon-md shadow-box" src="/assets/img/avatar/user.png" alt="...">
                      <p class="small bold my-0">{{ stage.title }}</p>
                    </div>
                    <button class="btn btn-primary" (click)="openUpdateModal(stage)">Edit</button>

                  </div>

                  <hr>
                  <p class="card-title regular">{{ 'Domain: ' + stage.domain }}</p>
                  <p class="card-text text-secondary">{{ stage.description }}</p>
                  <p class="bold small text-secondary my-0"><small>{{ 'Duration: ' + stage.duration }}</small></p>
                </div>

                <button class="btn btn-danger" (click)="deleteStage(stage)">Delete Offer</button>
              </div>
            </div>

            <!-- Modal for updating stage -->
            <div id="updateModal" class="modal" #updateModal style="display: none;">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h4 class="modal-title">Update Stage</h4>
                    <button type="button" class="btn-close" aria-label="Close" (click)="closeUpdateModal()"></button>
                  </div>
                  <div class="modal-body">
                    <form class="form" (submit)="updateStage()">
                      <div class="mb-3">
                        <label for="updatetitle" class="form-label">Title</label>
                        <input type="text" class="form-control" id="updatetitle" name="title" [(ngModel)]="selectedStage.title" required>
                      </div>
                      <div class="mb-3">
                        <label for="updatedescription" class="form-label">Description</label>
                        <textarea class="form-control" id="updatedescription" name="description" [(ngModel)]="selectedStage.description" required></textarea>
                      </div>
                      <div class="mb-3">
                        <label for="updatedomain" class="form-label">Domain</label>
                        <input type="text" class="form-control" id="updatedomain" name="domain" [(ngModel)]="selectedStage.domain" required>
                      </div>
                      <div class="mb-3">
                        <label for="updateduration" class="form-label">Duration</label>
                        <input type="text" class="form-control" id="updateduration" name="duration" [(ngModel)]="selectedStage.duration" required>
                      </div>
                      <div class="mb-3">
                        <label for="updatestartDate" class="form-label">Start Date</label>
                        <input type="date" class="form-control" id="updatestartDate" name="startDate" [(ngModel)]="selectedStage.startDate" required>
                      </div>
                      <div class="mb-3">
                        <label for="updatendDate" class="form-label">End Date</label>
                        <input type="date" class="form-control" id="updatendDate" name="endDate" [(ngModel)]="selectedStage.endDate" required>
                      </div>
                      <div class="mb-3">
                        <label for="updatenumberOfPositions" class="form-label">Number of Positions</label>
                        <input type="number" class="form-control" id="updatenumberOfPositions" name="numberOfPositions" [(ngModel)]="selectedStage.numberOfPositions" required>
                      </div>
                      <!-- End of repeated input fields -->
                      <button type="submit" class="btn btn-primary">Update Stage</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- ADD -->
        <div class="col-lg-4">
          <form class="form" (submit)="addStage()">
            <h4 class="mb-3 bold">Add New Internship</h4>

            <div class="mb-3">
              <label for="title" class="form-label">Title</label>
              <input type="text" class="form-control" id="title" name="title" [(ngModel)]="newStage.title" required>
            </div>
            <div class="mb-3">
              <label for="description" class="form-label">Description</label>
              <textarea class="form-control" id="description" name="description" [(ngModel)]="newStage.description" required></textarea>
            </div>
            <div class="mb-3">
              <label for="domain" class="form-label">Domain</label>
              <input type="text" class="form-control" id="domain" name="domain" [(ngModel)]="newStage.domain" required>
            </div>
            <div class="mb-3">
              <label for="duration" class="form-label">Duration</label>
              <input type="text" class="form-control" id="duration" name="duration" [(ngModel)]="newStage.duration" required>
            </div>
            <div class="mb-3">
              <label for="startDate" class="form-label">Start Date</label>
              <input type="date" class="form-control" id="startDate" name="startDate" [(ngModel)]="newStage.startDate" required>
            </div>
            <div class="mb-3">
              <label for="endDate" class="form-label">End Date</label>
              <input type="date" class="form-control" id="endDate" name="endDate" [(ngModel)]="newStage.endDate" required>
            </div>
            <div class="mb-3">
              <label for="numberOfPositions" class="form-label">Number of Positions</label>
              <input type="number" class="form-control" id="numberOfPositions" name="numberOfPositions" [(ngModel)]="newStage.numberOfPositions" required>
            </div>
            <button type="submit" class="btn btn-primary">Add Stage</button>
          </form>
        </div>

      </div>
    </div>

  </section>





  <app-footer></app-footer>
</main>

</body>

</html>
