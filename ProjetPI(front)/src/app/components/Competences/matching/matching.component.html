<!doctype html>
<html lang="en">
<head>
  <!-- Make sure to include Angular and Bootstrap CSS for styling if not already included -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
</head>
<body>
  <app-header [pageTitle]="'Your Skills'"></app-header>
  <main>
    <button (click)="openModal()" class="btn btn-primary open-modal-button">Select</button>

    <!-- Modal Section -->
    <div *ngIf="showModal" class="modal show" style="display: block; background: rgba(0,0,0,0.5);">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Select your skills needed</h5>
            <button type="button" class="close" (click)="closeModal()">&times;</button>
          </div>
          <div class="modal-body">
            <ul class="list-unstyled">
              <li *ngFor="let competence of allCompetences">
                <label>
                  <input type="checkbox" [(ngModel)]="competence.selected"> {{ competence.name }}
                </label>
              </li>
            </ul>
          </div>
          <div class="modal-footer">
            <button (click)="handleSaveSelections()" class="btn btn-success">Save</button>
            <button (click)="closeModal()" class="btn btn-secondary">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card Section -->
    <div class="container mt-3">
      <div class="alert alert-info" *ngIf="filteredUsers.length === 0">Aucun étudiant correspondant trouvé.</div>
      <div class="card mb-3" *ngFor="let user of filteredUsers">
        <div class="card-header">
          <h2>{{ user.name }} ({{ user.section }})</h2>
          <p>{{ user.email }}</p>
          <p>{{ user.Historique }}</p>
        </div>
        <div class="card-body">
          <h5>Compétences:</h5>
          <ul>
            <li *ngFor="let competence of user.competences">
              {{ competence.name }} - Niveau: {{ competence.importanceLevel }}
            </li>
          </ul>
        </div>
      </div>
    </div>
  </main>
  <app-footer></app-footer>
</body>
</html>
